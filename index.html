<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíò Valentine ?</title>

  <style>
    :root { color-scheme: light; }
    * { box-sizing: border-box; }

    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(circle at top, #ffe1ec, #fff);
      overflow:hidden;
    }

    /* Hearts */
    .hearts{ position:fixed; inset:0; pointer-events:none; }
    .heart{
      position:absolute;
      animation: floatUp linear forwards;
      font-size:18px;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) scale(.9); opacity:0; }
      10%{ opacity:1; }
      to{ transform: translateY(-120vh) scale(1.2); opacity:0; }
    }

    /* Card */
    .card{
      width:min(560px, 92vw);
      background: rgba(255,255,255,.85);
      border-radius:24px;
      padding:28px;
      box-shadow:0 12px 40px rgba(0,0,0,.15);
      text-align:center;
    }

    h1{ margin:0 0 10px; font-size:clamp(24px,4vw,34px); }
    p{ margin:0 0 18px; font-size:clamp(16px,2.4vw,18px); }

    .row{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
    }

    button{
      border:0;
      border-radius:14px;
      padding:14px 18px;
      font-size:18px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 8px 18px rgba(0,0,0,.12);
      transition: transform .25s ease, left .25s ease, top .25s ease;
      user-select:none;
      touch-action:manipulation;
      -webkit-tap-highlight-color: transparent;
    }

    button:active{ transform:scale(.98); }

    #yes{
      background:#ff2d55;
      color:white;
    }

    #no{
      background:#111;
      color:white;
      position:fixed;
    }

    #result{
      margin-top:18px;
      font-size:18px;
      font-weight:600;
    }

    small{ opacity:.6; }

    /* Pages */
    .page{ display:none; }
    .page.active{ display:block; }

    /* Envelope intro */
    .envelope-stage{
      width:min(420px,90vw);
      height:240px;
      margin:16px auto;
      position:relative;
      cursor:pointer;
    }

    .env-body{
      position:absolute;
      inset:0;
      background:#d8142f;
      border-radius:18px;
      overflow:hidden;
    }

    .env-flap{
      position:absolute;
      inset:0 0 auto 0;
      height:55%;
      background:#ff2d55;
      clip-path:polygon(0 0,100% 0,50% 85%);
      transform-origin:top;
      transition:transform .6s ease;
    }

    .letter{
      position:absolute;
      left:50%;
      bottom:18px;
      width:86%;
      height:70%;
      background:white;
      border-radius:12px;
      transform:translateX(-50%) translateY(40px);
      opacity:0;
      transition:.6s ease;
      display:grid;
      place-items:center;
      padding:16px;
    }

    .opened .env-flap{ transform:rotateX(180deg); }
    .opened .letter{
      opacity:1;
      transform:translateX(-50%) translateY(-30px);
    }

    /* GIF overlays */
    .gif-overlay{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      background:rgba(0,0,0,.35);
      z-index:9999;
      pointer-events:none;
    }

    .gif-overlay img{
      max-width:min(320px,80vw);
      border-radius:12px;
      box-shadow:0 20px 40px rgba(0,0,0,.4);
    }
  </style>
</head>

<body>

<div class="hearts" id="hearts"></div>

<!-- NOOO GIF -->
<div id="nooo-overlay" class="gif-overlay">
  <img src="./GIF/nooo.gif" alt="NOOO God Please Nooo">
</div>

<!-- YES GIF -->
<div id="yes-overlay" class="gif-overlay">
  <img src="./GIF/yes.gif" alt="YES Celebration">
</div>

<!-- PAGE 1 -->
<div class="card page active" id="pageIntro">
  <h1>üíå Pour toi</h1>
  <p>Ouvre l‚Äôenveloppe ‚ù§Ô∏è</p>

  <div class="envelope-stage" id="envelope">
    <div class="env-body">
      <div class="letter">
        <p><b>Question tr√®s importante</b></p>
        <p>Est-ce que tu veux √™tre ma Valentine le <b>15 f√©vrier ? (Parce que j'ai un taf de merde)</b></p>
        <small>(tape encore)</small>
      </div>
      <div class="env-flap"></div>
    </div>
  </div>
</div>

<!-- PAGE 2 -->
<div class="card page" id="pageAsk">
  <h1>üíå Question tr√®s importante</h1>
  <p>Est-ce que tu veux √™tre ma Valentine le <b>14 f√©vrier</b> ?</p>

  <div class="row">
    <button id="yes">Oui üòç</button>
    <button id="no">Hmm‚Ä¶ üôÉ</button>
  </div>

  <div id="result"></div>
  <small>(promis c‚Äôest s√©rieux)</small>
</div>

<script>
  const pageIntro = document.getElementById("pageIntro");
  const pageAsk = document.getElementById("pageAsk");
  const envelope = document.getElementById("envelope");
  const noBtn = document.getElementById("no");
  const yesBtn = document.getElementById("yes");
  const result = document.getElementById("result");
  const hearts = document.getElementById("hearts");
  const noooOverlay = document.getElementById("nooo-overlay");
  const yesOverlay = document.getElementById("yes-overlay");

  let opened = false;
  let hmmClicks = 0;
  let yesScale = 1;

  envelope.addEventListener("click", () => {
    if (!opened){
      opened = true;
      envelope.classList.add("opened");
    } else {
      pageIntro.classList.remove("active");
      pageAsk.classList.add("active");
      placeNo();
    }
  });

  function placeNo(){
    const pad = 16;
    const vw = document.documentElement.clientWidth;
    const vh = document.documentElement.clientHeight;
    const bw = noBtn.offsetWidth;
    const bh = noBtn.offsetHeight;

    const x = pad + Math.random() * (vw - bw - pad*2);
    const y = pad + Math.random() * (vh - bh - pad*2);

    noBtn.style.left = `${x}px`;
    noBtn.style.top = `${y}px`;
  }

  function showOverlay(el, duration = 1500){
    el.style.display = "grid";
    setTimeout(() => el.style.display = "none", duration);
  }

  function spawnHearts(n){
    const e = ["üíñ","üíò","üíï","‚ù§Ô∏è"];
    for(let i=0;i<n;i++){
      const h = document.createElement("div");
      h.className="heart";
      h.textContent = e[Math.floor(Math.random()*e.length)];
      h.style.left = Math.random()*100+"vw";
      h.style.bottom="-10px";
      h.style.animationDuration = (2+Math.random()*2)+"s";
      hearts.appendChild(h);
      setTimeout(()=>h.remove(),3000);
    }
  }

  noBtn.addEventListener("click", e=>{
    e.preventDefault();
    hmmClicks++;
    showOverlay(noooOverlay, 1500);
    placeNo();
    yesScale = Math.min(1 + hmmClicks*0.08, 1.7);
    yesBtn.style.transform = `scale(${yesScale})`;
    spawnHearts(6);
  });

  noBtn.addEventListener("touchstart", e=>{
    e.preventDefault();
    noBtn.click();
  }, {passive:false});

  yesBtn.addEventListener("click", ()=>{
    showOverlay(yesOverlay, 5000);
    spawnHearts(30);
    result.textContent = "YEEEES üò≠üíò Rendez-vous le 14 f√©vrier !";
    noBtn.style.opacity = .4;
    noBtn.disabled = true;
  });

  yesBtn.addEventListener("touchstart", e=>{
    e.preventDefault();
    yesBtn.click();
  }, {passive:false});
</script>

</body>
</html>
